# OpenCIAg | sentinel-hub-wms

## Install
```shell
npm install @ciag/sentinel-hub-wms
```

## Usage example with Angular

### Add the service
```ts
import { NgModule } from '@angular/core';
import { ColorService } from '@ciag/colorful';
import { PalleteBasedColorGenerator } from '@ciag/colorful/generator';
import { PalleteFactory, NEBULAR_CORPORATE } from '@ciag/colorful/pallete';

const palleteFactory = new PalleteFactory();
const pallete = palleteFactory.makeFromArray(NEBULAR_CORPORATE);

@NgModule({
    providers: [{
        provide: ColorService,
        useValue: new ColorService(new PalleteBasedColorGenerator(pallete,0.3))
    ]}
})
export class AppModule{}
```

### Use the service
```js
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var sentinel_hub_wms_1 = require("sentinel-hub-wms");
var WMSParameters_1 = require("sentinel-hub-wms/lib/WMSParameters");
//@ts-ignore
global.fetch = require("node-fetch");
var uuid = "{{Seu UUID aqui}}";
var geoJson = { "type": "FeatureCollection", "features": [{ "type": "Feature", "properties": {}, "geometry": { "type": "Polygon", "coordinates": [[[-410.4850959777832, -21.969255615138092], [-410.4859972000122, -21.96740494795422], [-410.48625469207764, -21.96619105638408], [-410.48638343811035, -21.965215955642634], [-410.4894518852234, -21.966330355943608], [-410.48882961273193, -21.96822083645885], [-410.48788547515863, -21.96929541416751], [-410.4866409301758, -21.970210788766085], [-410.48625469207764, -21.970509279207434], [-410.4850959777832, -21.969255615138092]]] } }, { "type": "Feature", "properties": {}, "geometry": { "type": "Polygon", "coordinates": [[[-410.48626542091364, -21.970529178547878], [-410.4873275756836, -21.971663436344706], [-410.4890871047973, -21.971265452184483], [-410.48938751220703, -21.971693285111762], [-410.49105048179626, -21.970230688148348], [-410.49167275428766, -21.96931531367804], [-410.4923701286316, -21.967753193620926], [-410.49225211143494, -21.96758404583231], [-410.48949480056757, -21.966479605320092], [-410.48879742622375, -21.968290485260436], [-410.48626542091364, -21.970529178547878]]] } }, { "type": "Feature", "properties": {}, "geometry": { "type": "Polygon", "coordinates": [[[-410.4911041259765, -21.97025058752784], [-410.49352884292597, -21.971514192415327], [-410.49378633499146, -21.970379933426536], [-410.4942584037781, -21.969066569596063], [-410.49441933631897, -21.96849943146026], [-410.4926919937134, -21.967773093347517], [-410.4924613237381, -21.96781538025729], [-410.4922842979431, -21.9680715889119], [-410.491726398468, -21.9692655648965], [-410.4911041259765, -21.97025058752784]]] } }, { "type": "Feature", "properties": {}, "geometry": { "type": "Polygon", "coordinates": [[[-410.4976379871368, -21.968569080125217], [-410.4975628852844, -21.96932526343225], [-410.49746096134186, -21.969688428984192], [-410.49584090709686, -21.969021795615046], [-410.49454271793365, -21.968459632207807], [-410.4946768283844, -21.96776811841613], [-410.49461245536804, -21.967330323771698], [-410.49448370933527, -21.966887552815734], [-410.4943549633026, -21.96655920492343], [-410.49468219280243, -21.966643779453108], [-410.4971498250961, -21.967668619751787], [-410.4972302913665, -21.967887516721348], [-410.4971766471863, -21.968186012045255], [-410.49719274044037, -21.968290485260436], [-410.4976379871368, -21.968569080125217]]] } }, { "type": "Feature", "properties": {}, "geometry": { "type": "Polygon", "coordinates": [[[-410.4944568872452, -21.968464607114967], [-410.49461245536804, -21.968131287949504], [-410.4946768283844, -21.967539271383956], [-410.49448370933527, -21.966872627927998], [-410.49424767494196, -21.966469655366538], [-410.49241304397583, -21.96571345685723], [-410.4906803369522, -21.964992079527633], [-410.4902672767639, -21.96532043104222], [-410.4900097846985, -21.965594056724623], [-410.48971474170685, -21.966011956749686], [-410.48951625823975, -21.966419905588314], [-410.49019753932953, -21.96672835393244], [-410.49218237400055, -21.967534296444377], [-410.4944568872452, -21.968464607114967]]] } }, { "type": "Feature", "properties": {}, "geometry": { "type": "Polygon", "coordinates": [[[-410.48942506313324, -21.966409955630585], [-410.48978984355927, -21.9658826068733], [-410.4903209209442, -21.965230880704407], [-410.49057841300964, -21.965011979641034], [-410.4900634288787, -21.964698552531235], [-410.4885506629944, -21.964106521659385], [-410.48636198043823, -21.96320105790685], [-410.4848223924636, -21.9625592696645], [-410.4848116636276, -21.962753298973745], [-410.4852783679962, -21.963554288958356], [-410.4855251312256, -21.964255773372265], [-410.4856699705124, -21.964668702294226], [-410.48580944538116, -21.964907504014597], [-410.48639953136444, -21.965176155470186], [-410.48903346061707, -21.966210956329522], [-410.48942506313324, -21.966409955630585]]] } }] };


sentinel_hub_wms_1.SentinelHubWms.geoJsonToShapeImgs(geoJson, uuid, { date: new Date(), layers: [WMSParameters_1.WMSParameters.Sentinel_2.NDVI] }).then(function (result) {
    result.forEach(function (element) {
        console.log("lat:" + element.LatLng[0][0] + " Long:" + element.LatLng[0][1] + ", Base64Lenght: " + result[0].img.length);
    });
}).catch(function (e) {
    console.log(e);
});


```
